// 동의어/유의어 사전 (반복 단어 방지용)

export const SYNONYM_DICTIONARY: Record<string, string[]> = {
  // 치아 관련
  '치아': ['자연치', '영구치', '구강 내 치아'],
  '어금니': ['구치', '대구치', '구치부', '어금니 부위'],
  '앞니': ['전치', '절치', '전치부', '앞니 부위'],
  '잇몸': ['치은', '치주 조직', '잇몸 조직'],
  '치아 뿌리': ['치근', '근단부', '뿌리 부위'],
  '사랑니': ['제3대구치', '지치', '매복치'],
  '치조골': ['잇몸뼈', '악골', '턱뼈'],

  // 치료 관련
  '치료': ['시술', '진료'],
  '시술': ['진료', '처치'],
  '수술': ['시술', '처치'],
  '신경치료': ['근관치료', '근관 처치', '신경 처치'],
  '근관치료': ['신경치료', '신경 처치', '근관 처치'],
  '교정치료': ['교정 시술', '교정 진료', '치아교정'],
  '치주치료': ['잇몸 처치', '치주 진료', '잇몸 치료'],
  '보철치료': ['보철 수복', '보철 진료', '크라운 수복'],
  // 임플란트: 동의어 회전 제외 (LLM이 '인공자연치' 등 부자연스러운 표현을 생성하는 문제 방지)
  // '임플란트': ['인공치아', '임플란트 시술'],
  '발치': ['치아 제거', '치아 적출', '발거'],
  '수복': ['복원', '회복', '재건'],
  '식립': ['매식', '이식', '설치'],
  '골이식': ['뼈이식', '골보충', '골대체'],
  '상악동거상술': ['사이너스 리프트', '상악동 수술', '상악동 거상'],
  '보철': ['지르코니아', '수복물', '보철 수복'],
  '스케일링': ['치석 제거', '치면 세마', '잇몸 청소'],

  // 상태/증상 관련
  '통증': ['아픔', '불편감', '동통', '압통'],
  '염증': ['감염', '발적', '염증 반응'],
  '증상': ['양상', '소견', '징후'],
  '손상': ['파손', '결손', '파절', '마모'],
  '흡수': ['소실', '감소', '위축'],

  // 진단/검사 관련
  '관찰': ['확인', '발견', '식별'],
  '진단': ['판단', '평가', '분석'],
  '검사': ['검진', '진단', '평가', '확인'],
  '촬영': ['영상', '사진', '스캔'],

  // 치료 과정 관련
  '진행': ['시행', '수행', '실시'],
  '적용': ['사용', '활용', '배치'],
  '완료': ['마무리', '종료', '끝'],

  // 일반 서술
  '경우': ['상황', '케이스', '사례'],
  '부위': ['영역', '부분', '해당 위치'],
  '관리': ['유지', '케어', '사후 관리'],
  '중요': ['핵심적', '필수적', '주요한'],

  '확인': ['파악', '점검', '살펴보기'],
  '상태': ['양상', '정도', '현황'],
}

// 동의어 규칙 프롬프트 생성 함수
export function getSynonymInstruction(): string {
  const entries = Object.entries(SYNONYM_DICTIONARY)

  return `
## 🔄🔄🔄 동의어 회전 규칙 (단어 반복 방지 — 최우선 적용!!) 🔄🔄🔄

⚠️⚠️ 동일 단어 반복은 네이버 SEO에서 **감점 요인**입니다!
같은 형태소가 글 전체에서 7~8회 이상 반복되면 블로그 품질 저하로 판단됩니다.

### 반복 횟수 제한 (절대 규칙!)
- **형태소A/B** (메인키워드 구성 요소): 각 7회 (위 형태소 규칙 참조!)
- **서브키워드** (형태소B와 다른 치료명): 글 전체 3~5회
- **기타 일반 단어** (치료, 진행, 확인, 상태 등): 한 섹션(##) 내 동일 단어 3회 이하! 글 전체 6회 이하!
- 3회째부터는 반드시 동의어/유의어로 교체하세요!

### 주요 동의어 사전:
${entries.map(([word, synonyms]) => `- ${word} → ${synonyms.join(', ')}`).join('\n')}

### 교체 규칙:
1. 같은 단어 2회 연속 사용 후 → 3회째는 반드시 동의어 사용
2. 전문용어 첫 등장 시 원어 사용, 이후 동의어와 번갈아 사용
3. 치과명, 지역명, 원장님 이름은 교체 대상에서 제외
4. 메인키워드(지역+치료)는 교체하지 않되, 정해진 배치 횟수(7회)만 사용
5. "~가 관찰됩니다" 같은 임상 표현도 "~가 확인됩니다", "~가 발견됩니다"로 변형

### 자가 검증:
글 작성 완료 후, 각 단어의 등장 횟수를 확인하세요:
- 형태소A/B 각각 정확히 7회인가? (위 형태소 규칙 참조)
- 서브키워드 5회 이하인가?
- "치료/진행/확인/상태" 등이 한 섹션에서 3회 이상? → 반드시 교체!
- 기타 일반 단어가 글 전체에서 6회 이상? → 반드시 교체!
`
}
